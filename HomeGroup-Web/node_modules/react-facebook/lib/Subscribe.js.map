{"version":3,"sources":["../src/Subscribe.jsx"],"names":["LoginStatus","componentWillUnmount","api","state","event","props","unsubscribe","handleChange","render","children","handleReady","Component","defaultProps","onChange","undefined","setState","subscribe"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;AACA;;;;;;IAYqBA,W;;;;;;;;;;;;;;;wBAOnBC,oB,mCAAuB;AAAA,QACJC,GADI,GACwB,IADxB,CACbC,KADa,CACJD,GADI;AAAA,QACYE,KADZ,GACwB,IADxB,CACGC,KADH,CACYD,KADZ;;AAErB,QAAIF,GAAJ,EAAS;AACPA,UAAII,WAAJ,CAAgBF,KAAhB,EAAuB,KAAKG,YAA5B;AACD;AACF,G;;wBAoBDC,M,qBAAS;AAAA,QACCC,QADD,GACc,KAAKJ,KADnB,CACCI,QADD;;;AAGP,WACE;AAAC,0BAAD;AAAA,QAAY,SAAS,KAAKC,WAA1B;AACGD;AADH,KADF;AAKD,G;;;EAxCsCE,gB,UAChCC,Y,GAAe;AACpBC,YAAUC;AADU,C;;;OAItBX,K,GAAe,E;;OASfO,W;wFAAc,iBAAOR,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACJE,mBADI,GACM,OAAKC,KADX,CACJD,KADI;;;AAGZ,qBAAKW,QAAL,CAAc;AACZb;AADY,eAAd;;AAHY;AAAA,qBAONA,IAAIc,SAAJ,CAAcZ,KAAd,EAAqB,OAAKG,YAA1B,CAPM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;;;;;;OAUdA,Y,GAAe,YAAmB;AAAA,QACxBM,QADwB,GACX,OAAKR,KADM,CACxBQ,QADwB;;;AAGhC,QAAIA,QAAJ,EAAc;AACZA;AACD;AACF,G;;kBA9BkBb,W","file":"Subscribe.js","sourcesContent":["// @flow\nimport React, { Component, type Node } from 'react';\nimport Initialize from './Initialize';\n\ntype Props = {\n  children: Node,\n  onChange?: Function,\n  event: string,\n};\n\ntype State = {\n  api?: Object,\n};\n\nexport default class LoginStatus extends Component<Props, State> {\n  static defaultProps = {\n    onChange: undefined,\n  };\n\n  state: State = {};\n\n  componentWillUnmount() {\n    const { state: { api }, props: { event } } = this;\n    if (api) {\n      api.unsubscribe(event, this.handleChange);\n    }\n  }\n\n  handleReady = async (api: Object): Promise<void> => {\n    const { event } = this.props;\n\n    this.setState({\n      api,\n    });\n\n    await api.subscribe(event, this.handleChange);\n  }\n\n  handleChange = (...args): void => {\n    const { onChange } = this.props;\n\n    if (onChange) {\n      onChange(...args);\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <Initialize onReady={this.handleReady}>\n        {children}\n      </Initialize>\n    );\n  }\n}\n"]}